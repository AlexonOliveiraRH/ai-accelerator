- op: add
  path: /spec/resourceHealthChecks/-
  value:
    group: datasciencecluster.opendatahub.io
    kind: DataScienceCluster
    check: |
      health_status = {}
      if obj.status ~= nil then
        if obj.status.conditions ~= nil then
          msg = ""
          componentsDegraded = 0
          available = False
          progressing = False
          degraded = False
          for i, condition in pairs(obj.status.conditions) do

            if condition.type == "Available" and condition.status == "True" then
              available = True
              msg = msg .. i .. ": " .. condition.type .. " | " .. condition.reason .. " | " .. condition.message "\n" 
            elseif condition.type == "Progressing" and condition.status == "True" then
              progressing = True
              msg = msg .. i .. ": " .. condition.type .. " | " .. condition.reason .. " | " .. condition.message "\n" 
            elseif condition.type == "Degraded" and condition.status == "True" then
              degraded = True
              msg = msg .. i .. ": " .. condition.type .. " | " .. condition.reason .. " | " .. condition.message "\n" 
            elseif condition.status == "False" then
              componentsDegraded += 1
              msg = msg .. i .. ": " .. condition.type .. " | " .. condition.reason .. " | " .. condition.message "\n" 
            end

          end

          if available == True and numDegraded == 0 then
            health_status.status = "Healthy"
          elseif progressing == True then
            health_status.status = "Progressing"
          elseif degraded == True or numDegraded > 0 then
            health_status.status = "Degraded"
          else
            health_status.status = "Degraded"

          health_status.message = msg
          return health_status
        else
          health_status.status = "Progressing"
          health_status.message = "DataScienceCluster is progressing..."
        end
      else
        health_status.status = "Progressing"
        health_status.message = "DataScienceCluster is progressing..."
      end

      return health_status
